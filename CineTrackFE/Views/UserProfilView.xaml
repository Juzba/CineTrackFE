<UserControl
    x:Class="CineTrackFE.Views.UserProfilView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:CineTrackFE.Common.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:CineTrackFE.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:viewmodels="clr-namespace:CineTrackFE.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:UserProfilViewModel}"
    d:DesignHeight="546"
    d:DesignWidth="975"
    prism:ViewModelLocator.AutoWireViewModel="True"
    FontSize="25"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converters:ImagePathConverter x:Key="ImagePathConv" />
    </UserControl.Resources>









    <Grid Background="#3D5B81">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="65*" />
            <ColumnDefinition Width="35*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="300" />
            <RowDefinition />

        </Grid.RowDefinitions>



        <TextBlock
            Grid.Row="0"
            Grid.Column="0"
            Grid.ColumnSpan="3"
            VerticalAlignment="Bottom"
            FontSize="16"
            Foreground="Red"
            Text="{Binding ErrorMessage}"
            TextAlignment="Center"
            TextWrapping="Wrap" />



        <StackPanel Grid.Column="1" Grid.ColumnSpan="2">

            <TextBlock
                Margin="0,0,0,20"
                FontSize="25"
                FontWeight="Bold"
                Text="Moje oblíbené filmy" />

            <ScrollViewer
                Grid.Column="1"
                Grid.ColumnSpan="2"
                Height="auto"
                VerticalAlignment="Top"
                HorizontalScrollBarVisibility="Auto"
                VerticalScrollBarVisibility="Disabled">

                <ItemsControl ItemsSource="{Binding UserFavoriteFilms}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>


                            <StackPanel HorizontalAlignment="Center" Orientation="Vertical">
                                <Image
                                    Width="150"
                                    Height="150"
                                    Source="{Binding ImagePath, Converter={StaticResource ImagePathConv}}" />

                                <TextBlock
                                    Margin="0,10,0,0"
                                    HorizontalAlignment="Center"
                                    FontSize="12"
                                    Foreground="White"
                                    Text="{Binding Title}" />
                            </StackPanel>

                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>


            </ScrollViewer>

        </StackPanel>



        <StackPanel
            Grid.Row="1"
            Grid.Column="1"
            Margin="0,0,60,0">
            <TextBlock
                Margin="0,0,0,20"
                FontSize="25"
                FontWeight="Bold"
                Text="Moje Poslední komentáře" />

            <DataGrid
                AutoGenerateColumns="False"
                Background="#3D5B81"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                FontSize="12"
                IsReadOnly="True"
                ItemsSource="{Binding UserLatestComments}">
                <DataGrid.Columns>
                    <DataGridTextColumn
                        Width="auto"
                        Binding="{Binding FilmTitle}"
                        Header="Název" />
                    <DataGridTextColumn
                        Width="220"
                        Binding="{Binding CommentText}"
                        Header="Komentář" />
                    <DataGridTextColumn Binding="{Binding CommentDate, StringFormat={}{0:dd. MM. yyyy}}" Header="Datum" />
                    <DataGridTextColumn Binding="{Binding Rating, StringFormat={}{0}%}" Header="Hodnocení" />
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>


        <Grid Grid.Row="1" Grid.Column="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="25" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <TextBlock
                Grid.ColumnSpan="2"
                FontSize="25"
                FontWeight="Bold"
                Text="Další statistika" />

            <TextBlock
                Grid.Row="2"
                Padding="0,5"
                FontSize="16"
                Text="Průměr Rating:" />
            <TextBlock
                Grid.Row="2"
                Grid.Column="1"
                Padding="0,5"
                FontSize="16"
                Text="{Binding AvgRating}" />

            <TextBlock
                Grid.Row="3"
                Padding="0,5"
                FontSize="16"
                Text="Nejvyšší Rating:" />
            <TextBlock
                Grid.Row="3"
                Grid.Column="1"
                Padding="0,5"
                FontSize="16"
                Text="{Binding TopRating}" />

            <TextBlock
                Grid.Row="4"
                Padding="0,5"
                FontSize="16"
                Text="Komentářů:" />
            <TextBlock
                Grid.Row="4"
                Grid.Column="1"
                Padding="0,5"
                FontSize="16"
                Text="{Binding TotalComments}" />

            <TextBlock
                Grid.Row="5"
                Padding="0,5"
                FontSize="16"
                Text="Oblibených filmů:" />
            <TextBlock
                Grid.Row="5"
                Grid.Column="1"
                Padding="0,5"
                FontSize="16"
                Text="{Binding FavoriteFilmsCount}" />

            <TextBlock
                Grid.Row="6"
                Padding="0,5"
                FontSize="16"
                Text="Poslední obl. film:" />
            <TextBlock
                Grid.Row="6"
                Grid.Column="1"
                Padding="0,5"
                FontSize="16"
                Text="{Binding LastFavoriteFilmTitle}" />
        </Grid>


    </Grid>







</UserControl>
